@main("Новое объявление") {

    <div class="container" style="margin-top: 70px;" ng-controller="newAnnouncementCtrl">
        <h4>Добавление объявления</h4>
        <hr>
        <form class="form-horizontal">
            <div class="form-group">
                <label for="title" class="col-sm-2 control-label">Заголовок</label>
                <div class="col-sm-8">
                    <input type="text" name="title" id="title" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <label for="category" class="col-sm-2 control-label">Раздел</label>
                <div class="col-sm-4">
                    <select name="category" id="category" class="form-control">
                        <option ng-repeat="category in categories" value="$index">{{category}}</option>

                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="type" class="col-sm-2 control-label">Тип</label>
                <div class="col-sm-4">
                    <label class="radio-inline">
                        <input type="radio" name="type" id="lostRadio" checked> Потеряно
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="type" id="foundRadio"> Найдено
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="description" class="col-sm-2 control-label">Описание</label>
                <div class="col-sm-8">
                    <textarea name="description" id="description" class="form-control" rows="5"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label for="address" class="col-sm-2 control-label">Адрес</label>
                <div class="col-sm-4">
                    <input type="text" ng-model="asyncSelected" typeahead="address.formatted_address for address in getCities($viewValue)" typeahead-loading="loadingLocations" typeahead-no-results="noResults" class="form-control">
                    <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
                    <div ng-show="noResults">
                        <i class="glyphicon glyphicon-remove"></i> No Results Found
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="name" class="col-sm-2 control-label">Контактное лицо</label>
                <div class="col-sm-4">
                    <input type="text" name="name" id="name" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <label for="email" class="col-sm-2 control-label">Email-адрес</label>
                <div class="col-sm-4">
                    <input type="email" name="email" id="email" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-default">Отправить</button>
                </div>
            </div>
        </form>
    </div>

    <script>
        angular.module('lostfoundApp', ['ui.bootstrap'])
        .controller('newAnnouncementCtrl', function($scope, $http) {


                $http.get('@routes.Announcement.getCategories()')
                 .success(function(data){
                    console.log(data);
                    $scope.categories = data;
                 }).error(function(data){
                    console.log(data);
                 });


            $scope.getCities = function(val) {
               return $http.get('@routes.Announcement.getAddress()', {
                params: {
                q: val
                  }
                })
               .then(function(response){
                    console.log(response);
                    return response.data;

               });
            }
        })

    </script>

}